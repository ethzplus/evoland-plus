% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/evoland_db.R
\name{evoland_db}
\alias{evoland_db}
\title{R6 Class for Folder-Based Data Storage Interface}
\description{
An R6 class that provides an interface to a folder-based data storage system
for the evoland package. Each table is stored as a parquet (or CSV) file.
This class uses DuckDB for in-memory SQL operations while persisting data
to disk in parquet format for better compression.

Inherits from \link{parquet_duckdb} for generic database operations.
}
\seealso{
Additional methods and active bindings are added to this class in separate files:
\itemize{
\item \link{evoland_db_tables} - Table active bindings (coords_t, lulc_data_t, etc.)
\item \link{evoland_db_views} - View active bindings (lulc_meta_long_v, etc.) and methods
\item \link{evoland_db_neighbors} - Neighbor analysis methods
}
}
\section{Super class}{
\code{\link[evoland:parquet_duckdb]{evoland::parquet_duckdb}} -> \code{evoland_db}
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-evoland_db-set_neighbors}{\code{evoland_db$set_neighbors()}}
\item \href{#method-evoland_db-generate_neighbor_predictors}{\code{evoland_db$generate_neighbor_predictors()}}
\item \href{#method-evoland_db-trans_pred_data_v}{\code{evoland_db$trans_pred_data_v()}}
\item \href{#method-evoland_db-new}{\code{evoland_db$new()}}
\item \href{#method-evoland_db-fetch}{\code{evoland_db$fetch()}}
\item \href{#method-evoland_db-set_report}{\code{evoland_db$set_report()}}
\item \href{#method-evoland_db-set_coords}{\code{evoland_db$set_coords()}}
\item \href{#method-evoland_db-set_periods}{\code{evoland_db$set_periods()}}
\item \href{#method-evoland_db-add_predictor}{\code{evoland_db$add_predictor()}}
\item \href{#method-evoland_db-clone}{\code{evoland_db$clone()}}
}
}
\if{html}{\out{
<details><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="evoland" data-topic="parquet_duckdb" data-id="attach_table"><a href='../../evoland/html/parquet_duckdb.html#method-parquet_duckdb-attach_table'><code>evoland::parquet_duckdb$attach_table()</code></a></span></li>
<li><span class="pkg-link" data-pkg="evoland" data-topic="parquet_duckdb" data-id="commit_append"><a href='../../evoland/html/parquet_duckdb.html#method-parquet_duckdb-commit_append'><code>evoland::parquet_duckdb$commit_append()</code></a></span></li>
<li><span class="pkg-link" data-pkg="evoland" data-topic="parquet_duckdb" data-id="commit_overwrite"><a href='../../evoland/html/parquet_duckdb.html#method-parquet_duckdb-commit_overwrite'><code>evoland::parquet_duckdb$commit_overwrite()</code></a></span></li>
<li><span class="pkg-link" data-pkg="evoland" data-topic="parquet_duckdb" data-id="commit_upsert"><a href='../../evoland/html/parquet_duckdb.html#method-parquet_duckdb-commit_upsert'><code>evoland::parquet_duckdb$commit_upsert()</code></a></span></li>
<li><span class="pkg-link" data-pkg="evoland" data-topic="parquet_duckdb" data-id="delete_from"><a href='../../evoland/html/parquet_duckdb.html#method-parquet_duckdb-delete_from'><code>evoland::parquet_duckdb$delete_from()</code></a></span></li>
<li><span class="pkg-link" data-pkg="evoland" data-topic="parquet_duckdb" data-id="detach_table"><a href='../../evoland/html/parquet_duckdb.html#method-parquet_duckdb-detach_table'><code>evoland::parquet_duckdb$detach_table()</code></a></span></li>
<li><span class="pkg-link" data-pkg="evoland" data-topic="parquet_duckdb" data-id="execute"><a href='../../evoland/html/parquet_duckdb.html#method-parquet_duckdb-execute'><code>evoland::parquet_duckdb$execute()</code></a></span></li>
<li><span class="pkg-link" data-pkg="evoland" data-topic="parquet_duckdb" data-id="get_query"><a href='../../evoland/html/parquet_duckdb.html#method-parquet_duckdb-get_query'><code>evoland::parquet_duckdb$get_query()</code></a></span></li>
<li><span class="pkg-link" data-pkg="evoland" data-topic="parquet_duckdb" data-id="list_tables"><a href='../../evoland/html/parquet_duckdb.html#method-parquet_duckdb-list_tables'><code>evoland::parquet_duckdb$list_tables()</code></a></span></li>
<li><span class="pkg-link" data-pkg="evoland" data-topic="parquet_duckdb" data-id="print"><a href='../../evoland/html/parquet_duckdb.html#method-parquet_duckdb-print'><code>evoland::parquet_duckdb$print()</code></a></span></li>
<li><span class="pkg-link" data-pkg="evoland" data-topic="parquet_duckdb" data-id="row_count"><a href='../../evoland/html/parquet_duckdb.html#method-parquet_duckdb-row_count'><code>evoland::parquet_duckdb$row_count()</code></a></span></li>
<li><span class="pkg-link" data-pkg="evoland" data-topic="parquet_duckdb" data-id="with_tables"><a href='../../evoland/html/parquet_duckdb.html#method-parquet_duckdb-with_tables'><code>evoland::parquet_duckdb$with_tables()</code></a></span></li>
</ul>
</details>
}}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-evoland_db-set_neighbors"></a>}}
\if{latex}{\out{\hypertarget{method-evoland_db-set_neighbors}{}}}
\subsection{Method \code{set_neighbors()}}{
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{evoland_db$set_neighbors(
  max_distance = 1000,
  distance_breaks = c(0, 100, 500, 1000),
  resolution = 100,
  overwrite = FALSE
)}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-evoland_db-generate_neighbor_predictors"></a>}}
\if{latex}{\out{\hypertarget{method-evoland_db-generate_neighbor_predictors}{}}}
\subsection{Method \code{generate_neighbor_predictors()}}{
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{evoland_db$generate_neighbor_predictors()}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-evoland_db-trans_pred_data_v"></a>}}
\if{latex}{\out{\hypertarget{method-evoland_db-trans_pred_data_v}{}}}
\subsection{Method \code{trans_pred_data_v()}}{
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{evoland_db$trans_pred_data_v(id_trans)}\if{html}{\out{</div>}}
}

}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-evoland_db-new"></a>}}
\if{latex}{\out{\hypertarget{method-evoland_db-new}{}}}
\subsection{Method \code{new()}}{
Initialize a new evoland_db object
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{evoland_db$new(path, default_format = c("parquet", "csv"), ...)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{path}}{Character string. Path to the data folder.}

\item{\code{default_format}}{Character. Default file format ("parquet" or "csv").
Default is "parquet".}

\item{\code{...}}{passed on to \code{set_report}}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A new \code{evoland_db} object
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-evoland_db-fetch"></a>}}
\if{latex}{\out{\hypertarget{method-evoland_db-fetch}{}}}
\subsection{Method \code{fetch()}}{
Fetch data from storage with evoland-specific view support
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{evoland_db$fetch(table_name, where = NULL, limit = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{table_name}}{Character string. Name of the table to query.}

\item{\code{where}}{Character string. Optional WHERE clause for the SQL query.}

\item{\code{limit}}{integerish, limit the amount of rows to return}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A data.table
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-evoland_db-set_report"></a>}}
\if{latex}{\out{\hypertarget{method-evoland_db-set_report}{}}}
\subsection{Method \code{set_report()}}{
Set reporting metadata
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{evoland_db$set_report(...)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{...}}{each named argument is entered into the table with the argument name
as its key}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-evoland_db-set_coords"></a>}}
\if{latex}{\out{\hypertarget{method-evoland_db-set_coords}{}}}
\subsection{Method \code{set_coords()}}{
Set coordinates for DB. Cannot overwrite existing table (would mean cascading deletion)
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{evoland_db$set_coords(type = c("square"), ...)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{type}}{string; which type of coordinates to set, see \link{coords_t}}

\item{\code{...}}{named arguments are passed to the appropriate coordinate creator function}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-evoland_db-set_periods"></a>}}
\if{latex}{\out{\hypertarget{method-evoland_db-set_periods}{}}}
\subsection{Method \code{set_periods()}}{
Set periods for DB. See \code{\link{periods_t}}
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{evoland_db$set_periods(
  period_length_str = "P10Y",
  start_observed = "1985-01-01",
  end_observed = "2020-01-01",
  end_extrapolated = "2060-01-01"
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{period_length_str}}{ISO 8601 duration string specifying the length of each
period (currently only accepting years, e.g., "P5Y" for 5 years)}

\item{\code{start_observed}}{Start date of the observed data (YYYY-MM-DD)}

\item{\code{end_observed}}{End date of the observed data (YYYY-MM-DD)}

\item{\code{end_extrapolated}}{End date for extrapolation time range (YYYY-MM-DD)}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-evoland_db-add_predictor"></a>}}
\if{latex}{\out{\hypertarget{method-evoland_db-add_predictor}{}}}
\subsection{Method \code{add_predictor()}}{
Add a predictor to the database
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{evoland_db$add_predictor(pred_spec, pred_data, pred_type)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{pred_spec}}{List of predictor specification; see \code{\link[=create_pred_meta_t]{create_pred_meta_t()}}}

\item{\code{pred_data}}{An object that can be coerced to \code{\link{pred_data_t}}, but doesn't have an
\code{id_pred}}

\item{\code{pred_type}}{Passed to \code{\link[=as_pred_data_t]{as_pred_data_t()}}; one of float, int, bool}
}
\if{html}{\out{</div>}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-evoland_db-clone"></a>}}
\if{latex}{\out{\hypertarget{method-evoland_db-clone}{}}}
\subsection{Method \code{clone()}}{
The objects of this class are cloneable with this method.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{evoland_db$clone(deep = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{deep}}{Whether to make a deep clone.}
}
\if{html}{\out{</div>}}
}
}
}
