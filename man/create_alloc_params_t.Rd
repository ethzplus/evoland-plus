% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/alloc_params_t.R
\name{create_alloc_params_t}
\alias{create_alloc_params_t}
\title{Initialize Allocation Parameters Table}
\arguments{
\item{n_perturbations}{Integer number of perturbed parameter sets to generate
per transition (default: 5)}

\item{sd}{Standard deviation for random perturbation of frac_expander as a
fraction (default: 0.05)}
}
\value{
Invisibly returns the computed \code{alloc_params_t} table. Side effect is
writing to the database's \code{alloc_params_t} table.
}
\description{
Computes allocation parameters for all viable transitions, aggregated across
observed periods and then randomly perturbed N times. This is a method
on \code{evoland_db} that analyzes patch dynamics to determine expansion vs. patcher
behavior for the Dinamica allocation procedure.

The method first computes parameters for all viable transitions across observed
periods (where \code{id_period > 1} and \code{is_extrapolated == FALSE}), then aggregates
(mean) these parameters by transition. Finally, it creates randomly perturbed
versions of these aggregated parameters and returns them together with the original
estimate, i.e. the result set size is (n viable transitions) * (m perturbations + 1)
}
\details{
The workflow is:
\enumerate{
\item For each transition and period pair:
\itemize{
\item Create rasters for the anterior and posterior periods
\item Identify transition cells (cells that changed from anterior to posterior class)
\item Use focal operations to determine if transition cells are adjacent to existing
patches (expansion) or form new patches (patcher behavior)
\item Compute patch statistics using SDMTools package
}
\item Aggregate parameters across periods (mean) for each transition
\item For each transition, create N randomly perturbed versions:
\itemize{
\item Add random noise to frac_expander (normal distribution, mean=0, sd=sd)
\item Clamp frac_expander to [0, 1]
\item Recalculate frac_patcher as 1 - frac_expander
}
\item Store all perturbed versions in the \code{alloc_params_t} table
}
}
\section{Requirements}{

\itemize{
\item The \code{SDMTools} package must be installed (from mmyrte/SDMTools fork)
\item \code{coords_t} must have \code{resolution} and \code{epsg} metadata
\item \code{trans_meta_t} must have at least one viable transition
\item \code{periods_t} must have at least one observed period with \code{id_period > 1}
}
}

\examples{
\dontrun{
db <- evoland_db$new("path/to/db")
# ... populate with coords, periods, lulc_data, trans_meta ...
db$create_alloc_params_t()
}

}
